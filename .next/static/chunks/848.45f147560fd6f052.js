"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[848],{848:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var l=s(5155),r=s(2115),a=s(3464),n=s(2108),i=s(4624),o=s(2085),c=s(2596),d=s(9688);let u=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,t)=>{let{className:s,variant:r,size:a,asChild:n=!1,...o}=e,m=n?i.DX:"button";return(0,l.jsx)(m,{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.QP)((0,c.$)(t))}(u({variant:r,size:a,className:s})),ref:t,...o})});function x(e){let{isOpen:t,toggle:s}=e;return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("button",{onClick:s,className:"text-purple-400 hover:underline focus:outline-none",children:["\uD83D\uDC49 ",t?"Hide Details":"Learn More About Basic Plan"]}),t&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-[#29293d] text-white rounded-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-bold",children:"\uD83C\uDD93 Basic Plan"}),(0,l.jsx)("p",{className:"text-purple-300",children:"Free Forever"}),(0,l.jsx)("p",{className:"mt-1",children:"Ideal For: Exploring the core experience"}),(0,l.jsxs)("ul",{className:"mt-2 text-sm text-purple-200 list-disc ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"✅ 5 Try-Ons per Month + Matching Analysis"}),(0,l.jsx)("li",{children:"✅ Style Quiz & Outfit Save"}),(0,l.jsx)("li",{children:"✅ 15 Styles in the Digital Wardrobe"}),(0,l.jsx)("li",{children:"\uD83D\uDEAB No Personalized Stylist Assistant"})]})]})]})}function h(){let[e,t]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("button",{onClick:()=>t(!e),className:"text-purple-400 hover:underline focus:outline-none",children:"\uD83D\uDC49 Learn More About Elite Plan"}),e&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-[#29293d] text-white rounded-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-bold",children:"\uD83D\uDC51 Elite Plan"}),(0,l.jsx)("p",{className:"text-purple-300",children:"Coming Soon"}),(0,l.jsx)("p",{className:"mt-1",children:"Ideal For: Power users, influencers & fashion creators"}),(0,l.jsxs)("ul",{className:"mt-2 text-sm text-purple-200 list-disc ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"✅ Unlimited Try-Ons + Matching Analysis"}),(0,l.jsx)("li",{children:"✅ Unlimited Personalized Stylist Assistant"}),(0,l.jsx)("li",{children:"✅ Wardrobe Tracker + Body Tracker"}),(0,l.jsx)("li",{children:"✅ Unlimited Styles in the Digital Wardrobe"}),(0,l.jsx)("li",{children:"✅ Exclusive Outfits"})]}),(0,l.jsx)("p",{className:"mt-2 text-yellow-400",children:"\uD83D\uDCAC Be the first to experience Elite benefits"})]})]})}function p(e){let{isOpen:t,toggle:s}=e;return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("button",{onClick:s,className:"text-purple-400 hover:underline focus:outline-none",children:["\uD83D\uDC49 ",t?"Hide Details":"Learn More About Pro Plan"]}),t&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-[#29293d] text-white rounded-lg",children:[(0,l.jsx)("h4",{className:"text-lg font-bold",children:"\uD83D\uDD25 Pro Plan"}),(0,l.jsx)("p",{className:"text-purple-300",children:"→ Promo Rp59,999"}),(0,l.jsx)("p",{className:"mt-1",children:"Ideal For: Fashion-savvy users who want full personalization"}),(0,l.jsxs)("ul",{className:"mt-2 text-sm text-purple-200 list-disc ml-4 space-y-1",children:[(0,l.jsx)("li",{children:"✅ 25 Try-Ons per Month + Matching Analysis"}),(0,l.jsx)("li",{children:"✅ 40 Personalized Stylist Assistant"}),(0,l.jsx)("li",{children:"✅ Compare Looks Side-by-Side"}),(0,l.jsx)("li",{children:"✅ 40 Styles in the Digital Wardrobe"}),(0,l.jsx)("li",{children:"\uD83D\uDEAB Exclusive Outfits"}),(0,l.jsx)("li",{children:"\uD83D\uDEAB Wardrobe Tracker + Body Tracker"})]}),(0,l.jsx)("p",{className:"mt-2 text-yellow-400",children:"\uD83D\uDCAC Most Popular – Save Rp15,000 now"})]})]})}function g(e){let{onSelectPlan:t}=e,[s,a]=(0,r.useState)(null),n=e=>{a(t=>t===e?null:e)};return(0,l.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-center text-white mb-6",children:"Choose Your Plan"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[{name:"Basic (Free)",price:"Rp. 0/mo",features:["5 Try-Ons/month","Matching Analysis"],promo:null,buttonText:"Continue with Basic Plan",LearnMoreComponent:x},{name:"Lite Plan",price:"Rp. 29,999/mo",features:["10 Try-Ons/month","Color Harmony Tips","Style Suggestions"],promo:"\uD83D\uDD13 Promo Price! 40% OFF",buttonText:"Upgrade to Lite – Rp.29,999",LearnMoreComponent:h},{name:"Pro Plan",price:"Rp. 59,999/mo",features:["25 Try-Ons/month","AI Stylist Assistant","Compare Looks Side-by-Side","Digital Wardrobe (Beta)"],promo:"\uD83D\uDD13 Promo Price! Save Rp.15,000",buttonText:"Upgrade to Pro – Rp.59,999",LearnMoreComponent:p},{name:"\uD83D\uDC51 Elite Plan",price:"Coming Soon",features:["Unlimited Try-Ons + Matching Analysis","Unlimited Personalized Stylist Assistant","Wardrobe Tracker + Body Tracker","Unlimited Styles in the Digital Wardrobe","Exclusive Outfits"],promo:"\uD83D\uDCAC Be the first to experience Elite benefits",buttonText:"Notify Me on Launch",LearnMoreComponent:h}].map((e,r)=>{let a=e.LearnMoreComponent;return(0,l.jsxs)("div",{className:"border border-purple-600 bg-[#1a1a2e] text-white rounded-xl p-5 shadow-lg flex flex-col justify-between w-full min-w-[280px] max-w-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-semibold",children:e.name}),(0,l.jsx)("p",{className:"text-lg text-purple-300 mt-1",children:e.price}),(0,l.jsx)("ul",{className:"mt-3 text-sm text-purple-200 list-disc ml-4 space-y-1",children:e.features.map((e,t)=>(0,l.jsxs)("li",{children:["✅ ",e]},t))}),e.promo&&(0,l.jsx)("p",{className:"mt-3 text-yellow-400",children:e.promo})]}),(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(m,{onClick:()=>t(e.name),className:"w-full bg-gradient-to-r from-purple-700 to-indigo-600 text-white px-4 py-2 rounded-full text-sm hover:opacity-90",children:e.buttonText}),(0,l.jsx)(a,{isOpen:s===r,toggle:()=>n(r)})]})]},r)})})]})}m.displayName="Button";var f=s(9509);let y=()=>{var e;let{data:t,status:s}=(0,n.useSession)(),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(null),[p,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[b,N]=(0,r.useState)(null),[w,S]=(0,r.useState)(null),[P,D]=(0,r.useState)(null),[A,C]=(0,r.useState)(!1),[k,T]=(0,r.useState)(null),[I,E]=(0,r.useState)(0),[O,U]=(0,r.useState)(!1),L=null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email;(0,r.useEffect)(()=>{if(!L||"authenticated"!==s)return;let e=sessionStorage.getItem("tryOnCount");if(e){E(parseInt(e));return}a.A.get("".concat("https://asia-southeast2-positive-rhino-454912-k2.cloudfunctions.net/tryonTracking","?userEmail=").concat(L)).then(e=>{console.log("getrack API Response:",e.data);let t=e.data.tryOnCount||0;E(t),sessionStorage.setItem("tryOnCount",t)}).catch(e=>console.error("Error fetching try-on count:",e))},[L,s]),console.log("Rendering with tryOnCount:",I);let R=e=>new Promise((t,s)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=()=>t(l.result.split(",")[1]),l.onerror=e=>s(e)}),M=async(e,t)=>{let s=await R(e),l=e.type,r=e.name;try{var n;let e=await a.A.post("https://asia-southeast2-positive-rhino-454912-k2.cloudfunctions.net/uploadImage",{fileName:r,fileDataBase64:s,contentType:l,imageType:t});return null===(n=e.data)||void 0===n?void 0:n.imageUrl}catch(e){throw console.error("Error uploading image:",e),Error("Failed to upload image.")}},B=e=>{let t="".concat(f.env.NEXT_PUBLIC_FYUSEAPI,"/process-tryon-result"),s=setInterval(async()=>{try{let l=await a.A.get("".concat(t,"?taskId=").concat(e));"succeed"===l.data.status?(clearInterval(s),T(null),C(!1),j(l.data.generatedImageUrl),window.generatedImageUrl=l.data.generatedImageUrl):"not_found"===l.data.status?console.log("Status not yet available. Still waiting..."):console.log("Still processing...")}catch(e){console.error("Polling error:",e),N("Error checking try-on status."),clearInterval(s),C(!1)}},5e3);T(s),C(!0)},_=async()=>{var e,t,l,r;if(!i||!c){N("Please upload both user and apparel images.");return}if("authenticated"!==s){alert("You need to log in to analyze fit."),(0,n.signIn)();return}try{y(!0),N(null),S(null);let s=await M(i,"user"),l=await M(c,"apparel"),r=await a.A.post("https://asia-southeast2-positive-rhino-454912-k2.cloudfunctions.net/matchingAnalyzer",{userImage:s,apparelImageUrl:l,userEmail:L,analysisType:"direct"});(null===(t=r.data)||void 0===t?void 0:null===(e=t.analysis)||void 0===e?void 0:e.analysisText)?S(r.data.analysis.analysisText):N("Matching Analysis failed.")}catch(e){console.error("Matching Analysis error:",e),N((null===(r=e.response)||void 0===r?void 0:null===(l=r.data)||void 0===l?void 0:l.error)||"An unexpected error occurred.")}finally{y(!1)}},F=async()=>{var e,t,l;if(!i||!c){N("Please upload both user and apparel images.");return}if("authenticated"!==s){alert("You need to log in to generate a try-on result."),(0,n.signIn)();return}if(I>=3){U(!0);return}try{y(!0),N(null),j(null);let t=await M(i,"user"),s=await M(c,"apparel"),l=await a.A.post("".concat(API_BASE_URL,"/tryon-image"),{person_image_url:t,garment_image_url:s,userEmail:L,analysisType:"virtual"});(null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.taskId)&&(D(l.data.taskId),B(l.data.taskId),await a.A.post("".concat(API_BASE_URL,"/tryontrack"),{userEmail:L}),E(e=>e+1))}catch(e){console.error("Virtual Try-On error:",e),N((null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.error)||"An unexpected error occurred.")}finally{y(!1)}};return((0,r.useEffect)(()=>()=>{k&&clearInterval(k)},[k]),"loading"===s)?(0,l.jsx)("p",{className:"text-white text-center",children:"Loading..."}):(0,l.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center font-sans",children:[(0,l.jsxs)("header",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Virtual Try-On"}),(0,l.jsx)("p",{className:"text-white mt-2",children:"Experience the perfect fit."})]}),O?(0,l.jsx)(g,{onSelectPlan:e=>alert("Plan selected: ".concat(e))}):(0,l.jsxs)("div",{className:"bg-[#1a1a2f] w-full max-w-4xl rounded-lg shadow-md p-8 space-y-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-medium text-white text-center mb-4",children:"Step 1: Upload Your Photos"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Your Photo"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(o(t),m(URL.createObjectURL(t)))},className:"hidden",id:"userPhoto"}),(0,l.jsx)("label",{htmlFor:"userPhoto",className:"cursor-pointer",children:u?(0,l.jsx)("img",{src:u,alt:"User Preview",className:"mx-auto max-h-48 object-contain rounded-lg"}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center h-48",children:(0,l.jsx)("p",{className:"text-white",children:"Click to upload"})})})]}),(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Clothing Item"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(d(t),h(URL.createObjectURL(t)))},className:"hidden",id:"apparelPhoto"}),(0,l.jsx)("label",{htmlFor:"apparelPhoto",className:"cursor-pointer",children:x?(0,l.jsx)("img",{src:x,alt:"Apparel Preview",className:"mx-auto max-h-48 object-contain rounded-lg"}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center h-48",children:(0,l.jsx)("p",{className:"text-white",children:"Click to upload"})})})]})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("button",{type:"button",onClick:F,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700",children:"Generate Try-On Result"}),(0,l.jsx)("button",{type:"button",onClick:_,className:"bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 mt-4",children:"Analyze Fit"})]}),(0,l.jsxs)("p",{className:"text-sm mt-2 text-center text-white",children:["You have used ",I," out of 3 try-ons this month."]}),A&&!v&&(0,l.jsx)("p",{className:"text-yellow-500 text-center mt-4",children:"Waiting for result... polling server."}),p&&(0,l.jsx)("p",{className:"text-gray-400 text-center animate-pulse",children:"Processing..."}),b&&(0,l.jsx)("p",{className:"text-red-500 text-center",children:b})]}),v&&(0,l.jsxs)("div",{className:"mt-8 w-full max-w-4xl bg-white rounded-lg shadow-md p-8 space-y-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-medium text-gray-800 text-center",children:"Step 2: Try-On Result"}),(0,l.jsx)("img",{src:v,alt:"Try-On Result",className:"rounded-lg shadow-md mx-auto max-h-96 object-contain"})]}),w&&(0,l.jsxs)("div",{className:"mt-6 w-full max-w-4xl bg-gray-50 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-800",children:"Fit Analysis"}),(0,l.jsx)("p",{className:"text-lg text-gray-600",children:w})]})]})}}}]);